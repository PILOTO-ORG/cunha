PS C:\Users\VivoBook\trabalho\o-piloto\cunha\frontend> node scripts/test-api.js
üöÄ INICIANDO TESTES DA API CUNHA FESTAS ERP

URL da API: https://n8n.piloto.live/webhook/cunha-festas

üìã CATEGORIA: PRODUTOS
==================================================

üîç Testando: Listar todos os produtos
Payload: {
  "action": "listar_produtos"
}
‚úÖ Sucesso: {
  "success": true,
  "data": {
    "id_produto": 14,
    "nome": "A√ßucareiro de porcelana branco",
    "quantidade_total": 5,
    "valor_locacao": null,
    "valor_danificacao": null,
    "tempo_limpeza": null
  },
  "action": "listar_produtos",
  "timestamp": "2025-07-11T23:38:45.017Z"
}
--------------------------------------------------

üîç Testando: Criar novo produto
Payload: {
  "action": "criar_produto",
  "nome": "Cadeira Tiffany - Teste",
  "quantidade_total": 50,
  "valor_locacao": 8.5,
  "valor_danificacao": 45,
  "tempo_limpeza": 5
}
‚úÖ Sucesso: {
  "success": true,
  "data": {
    "id_produto": 761,
    "nome": "Cadeira Tiffany - Teste",
    "quantidade_total": 50,
    "valor_locacao": "8.5",
    "valor_danificacao": "45",
    "tempo_limpeza": 5
  },
  "action": "criar_produto",
  "timestamp": "2025-07-11T23:38:46.302Z"
}
--------------------------------------------------

üîç Testando: Buscar produto por ID
Payload: {
  "action": "buscar_produto",
  "id_produto": 1
}
‚úÖ Sucesso: {
  "success": true,
  "data": {},
  "action": "buscar_produto",
  "timestamp": "2025-07-11T23:38:47.578Z"
}
--------------------------------------------------

üîç Testando: Atualizar produto
Payload: {
  "action": "atualizar_produto",
  "id_produto": 1,
  "nome": "Cadeira Tiffany - Atualizada",
  "valor_locacao": 9
}
‚úÖ Sucesso: {
  "success": true,
  "data": {
    "success": true
  },
  "action": "atualizar_produto",
  "timestamp": "2025-07-11T23:38:48.851Z"
}
--------------------------------------------------

üîç Testando: Verificar disponibilidade do produto
Payload: {
  "action": "verificar_disponibilidade",
  "id_produto": 1,
  "data_inicio": "2025-08-15T18:00:00.000Z",
  "data_fim": "2025-08-15T23:00:00.000Z"
}
‚úÖ Sucesso: {
  "success": true,
  "data": {},
  "action": "verificar_disponibilidade",
  "timestamp": "2025-07-11T23:38:50.145Z"
}
--------------------------------------------------

üîç Testando: Listar produtos com estoque baixo
Payload: {
  "action": "listar_produtos_estoque_baixo"
}
‚úÖ Sucesso: {
  "success": true,
  "data": {
    "id_produto": 435,
    "nome": "Tapetes 3 x 2 mts rose",
    "quantidade_total": 0,
    "valor_locacao": null,
    "valor_danificacao": null,
    "tempo_limpeza": null
  },
  "action": "listar_produtos_estoque_baixo",
  "timestamp": "2025-07-11T23:38:51.456Z"
}
--------------------------------------------------

FIM DA CATEGORIA: PRODUTOS

================================================================================

üìã CATEGORIA: CLIENTES
==================================================

üîç Testando: Listar todos os clientes
Payload: {
  "action": "listar_clientes"
}
‚úÖ Sucesso: {
  "success": true,
  "data": {
    "id_cliente": 1,
    "nome": "Luan",
    "telefone": "48998589586",
    "email": "luan@piloto.life",
    "cpf_cnpj": "10802025951"
  },
  "action": "listar_clientes",
  "timestamp": "2025-07-11T23:38:52.750Z"
}
--------------------------------------------------

üîç Testando: Criar novo cliente
Payload: {
  "action": "criar_cliente",
  "nome": "Jo√£o da Silva - Teste",
  "telefone": "(11) 99999-9999",
  "email": "joao.teste@email.com",
  "cpf_cnpj": "123.456.789-00"
}
‚úÖ Sucesso: {
  "success": true,
  "data": {
    "id_cliente": 2,
    "nome": "Jo√£o da Silva - Teste",
    "telefone": "(11) 99999-9999",
    "email": "joao.teste@email.com",
    "cpf_cnpj": "123.456.789-00"
  },
  "action": "criar_cliente",
  "timestamp": "2025-07-11T23:38:54.027Z"
}
--------------------------------------------------

üîç Testando: Buscar cliente por ID
Payload: {
  "action": "buscar_cliente",
  "id_cliente": 1
}
‚úÖ Sucesso: {
  "success": true,
  "data": {
    "id_cliente": 1,
    "nome": "Luan",
    "telefone": "48998589586",
    "email": "luan@piloto.life",
    "cpf_cnpj": "10802025951"
  },
  "action": "buscar_cliente",
  "timestamp": "2025-07-11T23:38:55.285Z"
}
--------------------------------------------------

üîç Testando: Atualizar cliente
Payload: {
  "action": "atualizar_cliente",
  "id_cliente": 1,
  "telefone": "(11) 88888-8888"
}
‚úÖ Sucesso: {
  "success": true,
  "data": {
    "id_cliente": 1,
    "nome": "Luan",
    "telefone": "(11) 88888-8888",
    "email": "luan@piloto.life",
    "cpf_cnpj": "10802025951"
  },
  "action": "atualizar_cliente",
  "timestamp": "2025-07-11T23:38:56.577Z"
}
--------------------------------------------------

üîç Testando: Buscar clientes por nome
Payload: {
  "action": "buscar_clientes_nome",
  "nome": "Jo√£o"
}
‚úÖ Sucesso: {
  "success": true,
  "data": {
    "id_cliente": 2,
    "nome": "Jo√£o da Silva - Teste",
    "telefone": "(11) 99999-9999",
    "email": "joao.teste@email.com",
    "cpf_cnpj": "123.456.789-00"
  },
  "action": "buscar_clientes_nome",
  "timestamp": "2025-07-11T23:38:57.856Z"
}
--------------------------------------------------

üîç Testando: Buscar cliente por email
Payload: {
  "action": "buscar_cliente_email",
  "email": "joao.teste@email.com"
}
‚úÖ Sucesso: {
  "success": true,
  "data": {
    "id_cliente": 2,
    "nome": "Jo√£o da Silva - Teste",
    "telefone": "(11) 99999-9999",
    "email": "joao.teste@email.com",
    "cpf_cnpj": "123.456.789-00"
  },
  "action": "buscar_cliente_email",
  "timestamp": "2025-07-11T23:38:59.322Z"
}
--------------------------------------------------

üîç Testando: Verificar se cliente existe
Payload: {
  "action": "verificar_cliente_existe",
  "email": "joao.teste@email.com"
}
‚úÖ Sucesso: {
  "success": true,
  "data": {
    "total": "1"
  },
  "action": "verificar_cliente_existe",
  "timestamp": "2025-07-11T23:39:00.591Z"
}
--------------------------------------------------

üîç Testando: Obter estat√≠sticas do cliente
Payload: {
  "action": "obter_estatisticas_cliente",
  "id_cliente": 1
}
‚úÖ Sucesso: {
  "success": true,
  "data": {
    "id_cliente": 1,
    "nome": "Luan",
    "total_reservas": "1",
    "ultima_reserva": "2025-07-01T03:00:00.000Z"
  },
  "action": "obter_estatisticas_cliente",
  "timestamp": "2025-07-11T23:39:01.870Z"
}
--------------------------------------------------

FIM DA CATEGORIA: CLIENTES

================================================================================

üìã CATEGORIA: LOCAIS
==================================================

üîç Testando: Listar todos os locais
Payload: {
  "action": "listar_locais"
}
‚úÖ Sucesso: {
  "success": true,
  "data": {
    "id_local": 1,
    "descricao": "Arena Opus",
    "endereco": "S√£o Jos√©, Santa Catarina; Brasil",
    "capacidade": 17000,
    "tipo": "Arena"
  },
  "action": "listar_locais",
  "timestamp": "2025-07-11T23:39:03.256Z"
}
--------------------------------------------------

üîç Testando: Criar novo local
Payload: {
  "action": "criar_local",
  "descricao": "Sal√£o de Festas - Teste",
  "endereco": "Rua Teste, 123",
  "capacidade": 100,
  "tipo": "salao"
}
‚úÖ Sucesso: {
  "success": true,
  "data": {
    "id_local": 2,
    "descricao": "Sal√£o de Festas - Teste",
    "endereco": "Rua Teste, 123",
    "capacidade": 100,
    "tipo": "salao"
  },
  "action": "criar_local",
  "timestamp": "2025-07-11T23:39:04.559Z"
}
--------------------------------------------------

üîç Testando: Buscar local por ID
Payload: {
  "action": "buscar_local",
  "id_local": 1
}
‚úÖ Sucesso: {
  "success": true,
  "data": {
    "id_local": 1,
    "descricao": "Arena Opus",
    "endereco": "S√£o Jos√©, Santa Catarina; Brasil",
    "capacidade": 17000,
    "tipo": "Arena"
  },
  "action": "buscar_local",
  "timestamp": "2025-07-11T23:39:05.832Z"
}
--------------------------------------------------

üîç Testando: Atualizar local
Payload: {
  "action": "atualizar_local",
  "id_local": 1,
  "capacidade": 120
}
‚úÖ Sucesso: {
  "success": true,
  "data": {
    "id_local": 1,
    "descricao": "Arena Opus",
    "endereco": "S√£o Jos√©, Santa Catarina; Brasil",
    "capacidade": 120,
    "tipo": "Arena"
  },
  "action": "atualizar_local",
  "timestamp": "2025-07-11T23:39:07.113Z"
}
--------------------------------------------------

üîç Testando: Buscar locais por tipo
Payload: {
  "action": "buscar_locais_tipo",
  "tipo": "salao"
}
‚úÖ Sucesso: {
  "success": true,
  "data": {
    "id_local": 2,
    "descricao": "Sal√£o de Festas - Teste",
    "endereco": "Rua Teste, 123",
    "capacidade": 100,
    "tipo": "salao"
  },
  "action": "buscar_locais_tipo",
  "timestamp": "2025-07-11T23:39:08.382Z"
}
--------------------------------------------------

üîç Testando: Verificar disponibilidade do local
Payload: {
  "action": "verificar_disponibilidade_local",
  "id_local": 1,
  "data_inicio": "2025-08-15T18:00:00.000Z",
  "data_fim": "2025-08-15T23:00:00.000Z"
}
‚úÖ Sucesso: {
  "success": true,
  "data": {
    "id_local": 1,
    "descricao": "Arena Opus",
    "reservas_conflitantes": "0"
  },
  "action": "verificar_disponibilidade_local",
  "timestamp": "2025-07-11T23:39:09.655Z"
}
--------------------------------------------------

FIM DA CATEGORIA: LOCAIS

================================================================================

üìã CATEGORIA: RESERVAS
==================================================

üîç Testando: Listar todas as reservas
Payload: {
  "action": "listar_reservas"
}
‚úÖ Sucesso: {
  "success": true,
  "data": {
    "id_item_reserva": 2,
    "id_reserva": 2,
    "id_cliente": 1,
    "id_local": 1,
    "data_inicio": "2025-07-01T03:00:00.000Z",
    "data_fim": "2025-07-01T03:00:00.000Z",
    "status": "ativa",
    "id_produto": 474,
    "quantidade": 1,
    "cliente_nome": "Luan",
    "local_descricao": "Arena Opus",
    "produto_nome": "Toalha brocada verde 3,30 mts"
  },
  "action": "listar_reservas",
  "timestamp": "2025-07-11T23:39:10.920Z"
}
--------------------------------------------------

üîç Testando: Criar nova reserva
Payload: {
  "action": "criar_reserva",
  "id_cliente": 1,
  "id_local": 1,
  "data_inicio": "2025-08-15T18:00:00.000Z",
  "data_fim": "2025-08-15T23:00:00.000Z",
  "id_produto": 1,
  "quantidade": 10,
  "status": "ativa"
}
‚ùå Erro HTTP 500: {
  "message": "Error in workflow"
}
--------------------------------------------------

üîç Testando: Buscar reserva por ID
Payload: {
  "action": "buscar_reserva",
  "id_item_reserva": 1
}
‚úÖ Sucesso: {
  "success": true,
  "data": {},
  "action": "buscar_reserva",
  "timestamp": "2025-07-11T23:39:13.453Z"
}
--------------------------------------------------

üîç Testando: Atualizar reserva
Payload: {
  "action": "atualizar_reserva",
  "id_item_reserva": 1,
  "quantidade": 15
}
‚úÖ Sucesso: {
  "success": true,
  "data": {
    "success": true
  },
  "action": "atualizar_reserva",
  "timestamp": "2025-07-11T23:39:14.714Z"
}
--------------------------------------------------

üîç Testando: Buscar reservas por cliente
Payload: {
  "action": "buscar_reservas_cliente",
  "id_cliente": 1
}
‚úÖ Sucesso: {
  "success": true,
  "data": {
    "id_item_reserva": 2,
    "id_reserva": 2,
    "id_cliente": 1,
    "id_local": 1,
    "data_inicio": "2025-07-01T03:00:00.000Z",
    "data_fim": "2025-07-01T03:00:00.000Z",
    "status": "ativa",
    "id_produto": 474,
    "quantidade": 1,
    "local_descricao": "Arena Opus",
    "produto_nome": "Toalha brocada verde 3,30 mts"
  },
  "action": "buscar_reservas_cliente",
  "timestamp": "2025-07-11T23:39:15.986Z"
}
--------------------------------------------------

üîç Testando: Buscar reservas por produto
Payload: {
  "action": "buscar_reservas_produto",
  "id_produto": 1
}
‚úÖ Sucesso: {
  "success": true,
  "data": {},
  "action": "buscar_reservas_produto",
  "timestamp": "2025-07-11T23:39:17.278Z"
}
--------------------------------------------------

üîç Testando: Buscar reservas por per√≠odo
Payload: {
  "action": "buscar_reservas_periodo",
  "data_inicio": "2025-08-01T00:00:00.000Z",
  "data_fim": "2025-08-31T23:59:59.000Z"
}
‚úÖ Sucesso: {
  "success": true,
  "data": {},
  "action": "buscar_reservas_periodo",
  "timestamp": "2025-07-11T23:39:18.559Z"
}
--------------------------------------------------

üîç Testando: Atualizar status da reserva
Payload: {
  "action": "atualizar_status_reserva",
  "id_item_reserva": 1,
  "status": "conclu√≠da"
}
‚úÖ Sucesso: {
  "success": true,
  "data": {
    "success": true
  },
  "action": "atualizar_status_reserva",
  "timestamp": "2025-07-11T23:39:19.840Z"
}
--------------------------------------------------

FIM DA CATEGORIA: RESERVAS

================================================================================

üìã CATEGORIA: MOVIMENTOS
==================================================

üîç Testando: Listar todos os movimentos
Payload: {
  "action": "listar_movimentos"
}
‚úÖ Sucesso: {
  "success": true,
  "data": {
    "id_evento": 2,
    "id_produto": 474,
    "data_evento": "2025-06-30T21:29:29.771Z",
    "tipo_evento": "perda",
    "quantidade": 1,
    "observacao": "Rasgou na Arena Opus durante evento do cliente Luan",      
    "responsavel": null,
    "reserva_id": null,
    "produto_nome": "Toalha brocada verde 3,30 mts"
  },
  "action": "listar_movimentos",
  "timestamp": "2025-07-11T23:39:21.111Z"
}
--------------------------------------------------

üîç Testando: Criar novo movimento
Payload: {
  "action": "criar_movimento",
  "id_produto": 1,
  "tipo_evento": "entrada",
  "quantidade": 20,
  "observacao": "Entrada de estoque - Teste",
  "responsavel": "Sistema de Teste"
}
‚ùå Erro HTTP 500: {
  "message": "Error in workflow"
}
--------------------------------------------------

üîç Testando: Buscar movimento por ID
Payload: {
  "action": "buscar_movimento",
  "id_evento": 1
}
‚úÖ Sucesso: {
  "success": true,
  "data": {},
  "action": "buscar_movimento",
  "timestamp": "2025-07-11T23:39:23.648Z"
}
--------------------------------------------------

üîç Testando: Buscar movimentos por produto
Payload: {
  "action": "buscar_movimentos_produto",
  "id_produto": 1
}
‚úÖ Sucesso: {
  "success": true,
  "data": {},
  "action": "buscar_movimentos_produto",
  "timestamp": "2025-07-11T23:39:24.918Z"
}
--------------------------------------------------

üîç Testando: Buscar movimentos por tipo
Payload: {
  "action": "buscar_movimentos_tipo",
  "tipo_evento": "entrada"
}
‚úÖ Sucesso: {
  "success": true,
  "data": {},
  "action": "buscar_movimentos_tipo",
  "timestamp": "2025-07-11T23:39:26.172Z"
}
--------------------------------------------------

üîç Testando: Buscar movimentos por per√≠odo
Payload: {
  "action": "buscar_movimentos_periodo",
  "data_inicio": "2025-07-01T00:00:00.000Z",
  "data_fim": "2025-07-31T23:59:59.000Z"
}
‚úÖ Sucesso: {
  "success": true,
  "data": {},
  "action": "buscar_movimentos_periodo",
  "timestamp": "2025-07-11T23:39:27.440Z"
}
--------------------------------------------------

üîç Testando: Obter hist√≥rico completo do produto
Payload: {
  "action": "obter_historico_produto",
  "id_produto": 1
}
‚úÖ Sucesso: {
  "success": true,
  "data": {},
  "action": "obter_historico_produto",
  "timestamp": "2025-07-11T23:39:28.703Z"
}
--------------------------------------------------

FIM DA CATEGORIA: MOVIMENTOS

================================================================================

üìä RESUMO DOS TESTES
==================================================
Total de testes: 35
Sucessos: 33
Falhas: 2
Taxa de sucesso: 94.3%

‚ö†Ô∏è  ALGUNS TESTES FALHARAM. Verifique os logs acima.